/**
 *  @author REZ1DENT3, Babichev Maxim
 *  @site https://babichev.net
 *  @year 2013 - 2016
 *  @version 0.4
 */

var jNet=new(function(){String.prototype.toDocument=function(){domParser=new DOMParser();return domParser.parseFromString(this,"text/html")};this.querySelectorAll=function(selector){_tmp=new jNet.jNArray();_arr=document.querySelectorAll(selector);for(var i=0;i<_arr.length;++i){_tmp.push(new jNet.jNDocQuery(_arr[i]))}
return _tmp};this.jNArray=function(data){this._array=[];if(typeof data!="undefined"){this._array=data}
this.at=function(index){return this._array[index]};this.unique=function(){var ko={};this.forEach(function(item){ko[item]=1});return Object.keys(ko)};this.diff=function(a){return this.filter(function(i){return a.indexOf(i)<0})};this.remove=function(item){this.splice(this.indexOf(item),1)};this.contains=function(item){return(this.indexOf(item)!=-1)};this.length=function(){return this._array.length};this.concat=function(items){return this._array.concat(items)};this.join=function(separator){return this._array.join(separator)};this.pop=function(){return this._array.pop()};this.push=function(items){return this._array.push(items)};this.reverse=function(){return this._array.reverse()};this.shift=function(){return this._array.shift()};this.slice=function(start,end){return this._array.slice(start,end)};this.sort=function(compareFn){return this._array.some(compareFn)};this.splice=function(start,deleteCount,items){return this._array.splice(start,deleteCount,items)};this.unshift=function(items){return this._array.unshift(items)};this.valueOf=function(){return this._array.valueOf()};this.reduce=function(callback,initialValue){return this._array.reduce(callback,initialValue)};this.reduceRight=function(callback,initialValue){return this._array.reduceRight(callback,initialValue)};this.indexOf=function(searchElement,fromIndex){return this._array.indexOf(searchElement,fromIndex)};this.lastIndexOf=function(searchElement,fromIndex){return this._array.lastIndexOf(searchElement,fromIndex)};this.every=function(callback,thisArg){return this._array.every(callback,thisArg)};this.filter=function(callback,thisArg){return this._array.filter(callback,thisArg)};this.forEach=function(callback,thisArg){return this._array.forEach(callback,thisArg)};this.map=function(callback,thisArg){return this._array.map(callback,thisArg)};this.some=function(callback,thisArg){return this._array.some(callback,thisArg)};this.toString=function(){return '[jNArray]'};return this};this.jNDocQuery=function(doc){this._array=new jNet.jNArray();this._d=doc;switch(typeof doc){case 'object':toStringArr=doc.toString().split(',');if(toStringArr.length){switch(toStringArr[0]){case this.toString():return doc;case jNet.jNArray().toString():this._array=doc;this._d=null;break}}
break;case 'string':this._d=document.querySelector(doc);break}
this._call=function(){if(typeof this._array!="undefined"&&this._array.length()){var args=arguments[0];return new jNet.jNArray(this._array.map(function(element){return element[args.callback].call(element,args)}))}
else{return this[arguments[0].callback].call(this,arguments[0])}};this.querySelector=function(selector){return this._call.call(this,{callback:'_querySelector',selector:selector})};this._querySelector=function(obj){_tmp=new jNet.jNDocQuery(this._d);_tmp._d=this._d.querySelector(obj.selector);return _tmp};this.toString=function(){return '[jNDocQuery]'};this.classList=function(){return this._call.call(this,{callback:'_classList'})};this._classList=function(){_classList=this._d.classList;if(typeof _classList=='undefined'){return new jNet.jNArray()}
return new jNet.jNArray(Object.keys(_classList).map(function(key){return _classList[key]}))};this.addClass=function(newClass){return this._call.call(this,{callback:'_addClass',newClass:newClass})};this._addClass=function(obj){this._d.classList.add(obj.newClass);return this};this.removeClass=function(className){return this._call.call(this,{callback:'_removeClass',className:className})};this._removeClass=function(obj){this._d.classList.remove(obj.className);return this};this.hasClass=function(className){return this._call.call(this,{callback:'_hasClass',className:className})};this._hasClass=function(obj){return this.classList().contains(obj.className)};this.toggleClass=function(className){return this._call.call(this,{callback:'_toggleClass',className:className})};this._toggleClass=function(obj){this._d.classList.toggle(obj.className);return this};this.cleanClass=function(){return this._call.call(this,{callback:'_cleanClass'})};this._cleanClass=function(){var self=this;this.classList().forEach(function(element){self.removeClass(element)});return self};this.parent=function(){return this._call.call(this,{callback:'_parent'})};this._parent=function(){if(typeof this._d.parentNode!="undefined"){return jNet.jNDocQuery(this._d.parentNode)}
return undefined};this.text=function(value){return this._call.call(this,{callback:'_text',value:value})};this._text=function(obj){if(typeof obj.value!="undefined"){this._d.innerText=obj.value;return this}
return this._d.innerText};this.innerHTML=function(value){return this._call.call(this,{callback:'_innerHTML',value:value})};this._innerHTML=function(obj){if(typeof obj.value!="undefined"){this._d.innerHTML=obj.value;return this}
return this._d.innerHTML};this.outerHTML=function(value){return this._call.call(this,{callback:'_outerHTML',value:value})};this._outerHTML=function(obj){if(typeof obj.value!="undefined"){this._d.outerHTML=obj.value;return this}
return this._d.outerHTML};this.append=function(html){return this._call.call(this,{callback:'_append',html:html})};this._append=function(obj){html=obj.html;if(typeof html=='string'){html=html.toDocument()}
else{switch(html.toString()){case this.toString():html=html._outerHTML().toDocument();break}}
if(typeof html.outerHTML!='undefined'){html=html.outerHTML.toDocument()}
if(typeof html.body.firstChild!='undefined'){this._d.appendChild(html.body.firstChild)}
return this};this.hasAttribute=function(nameAttribute){return this._call.call(this,{callback:'_hasAttribute',nameAttribute:nameAttribute})};this._hasAttribute=function(obj){return this._d.hasAttribute(obj.nameAttribute)};this.addAttribute=function(nameAttribute,valueAttribute){return this._call.call(this,{callback:'_addAttribute',nameAttribute:nameAttribute,valueAttribute:valueAttribute})};this._addAttribute=function(obj){this._d.setAttribute(obj.nameAttribute,obj.valueAttribute);return this};this.width=function(){return this._call.call(this,{callback:'_width'})};this._width=function(){return this._d.clientWidth};this.height=function(){return this._call.call(this,{callback:'_height'})};this._height=function(){return this._d.clientHeight};this.removeAttribute=function(nameAttribute){return this._call.call(this,{callback:'_removeAttribute',nameAttribute:nameAttribute})};this._removeAttribute=function(obj){if(this._hasAttribute(obj.nameAttribute)){this._d.removeAttribute(obj.nameAttribute)}
return this};this.remove=function(){return this._call.call(this,{callback:'_remove'})};this._remove=function(){if(typeof this.parentNode=='undefined'){this._outerHTML("")}
else{this._d.parentNode.removeChild(this._d)}
return this};this.ready=function(listener,useCapture){return this._call.call(this,{callback:'_ready',listener:listener,useCapture:useCapture})};this._ready=function(obj){this._addEventListener("DOMContentLoaded",obj.listener,obj.useCapture);return this};this.click=function(listener,useCapture){return this._call.call(this,{callback:'_click',listener:listener,useCapture:useCapture})};this._click=function(obj){this.addEventListener('click',obj.listener,obj.useCapture);return this};this.addEventListener=function(type,listener,useCapture){return this._call.call(this,{callback:'_addEventListener',type:type,listener:listener,useCapture:useCapture})};this._addEventListener=function(obj){this._d.addEventListener(obj.type,obj.listener,obj.useCapture);return this};return this};this.serialize=function(objData){return Object.keys(objData).map(function(key){return encodeURIComponent(key)+'='+encodeURIComponent(objData[key])}).join('&')};this.ajax=function(options){var http=new XMLHttpRequest();if(typeof options.success=="undefined"){options.success=function(response){}}
if(typeof options.data=="undefined"){options.data={}}
if(typeof options.method=="undefined"){options.method="GET"}
if(typeof options.contentType=="undefined"){options.contentType='application/x-www-form-urlencoded'}
if(typeof options.stateChange=="undefined"){options.stateChange=function(response){}}
if(typeof options.progress=="undefined"){options.progress=function(response){}}
if(typeof options.fail=="undefined"){options.fail=function(response){}}
if(typeof options.async=="undefined"){options.async=!0}
http.onreadystatechange=options.stateChange;http.onload=options.success;http.onerror=options.fail;http.onprogress=options.progress;if(options.method=="GET"){url=options.url+"?"+this.serialize(options.data)}
else{url=options.url}
http.open(options.method,url,options.async);http.setRequestHeader('Content-Type',options.contentType);if(options.method=="GET"){http.send()}
else{http.send(this.serialize(options.data))}};this.now=function(){return Math.floor((new Date()).getTime()/1000)};this.clone=function(obj){return JSON.parse(JSON.stringify(obj))};this.ready=function(listener,useCapture){document.addEventListener("DOMContentLoaded",listener,useCapture)};return this})()