<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jNet Framework</title>

    <link rel="stylesheet" href="demo/icon.css">
    <link rel="stylesheet" href="demo/demo.css">
    <link rel="stylesheet" href="demo/material.indigo-pink.min.css">
    <script defer src="demo/material.min.js"></script>

    <script type="text/javascript" src="builds/js/jNet.min.js"></script>

    <script type="text/javascript">

        var $ = jNet;

        $(function () {

            $body = $('body');
            $body.append('<div></div>');
            $layout = $('div');

            'demo-layout mdl-layout mdl-layout--fixed-header mdl-js-layout mdl-color--grey-100'.split(' ')
                    .forEach(function (divClass) {
                        $layout.addClass(divClass);
                    });

            $layout.append('<div></div>').find('div').addClass('demo-ribbon');

            $main = $layout.append('<main></main>').find('main');

            'demo-main mdl-layout__content'.split(' ')
                    .forEach(function (mainClass) {
                        $main.addClass(mainClass);
                    });

            $main = $main.append('<div></div>').find('div');

            'demo-container mdl-grid'.split(' ')
                    .forEach(function (mainClass) {
                        $main.addClass(mainClass);
                    });

            $main.append('<div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>');
            $main.append('<div class="demo-content mdl-color--white mdl-shadow--4dp content mdl-color-text--grey-800 mdl-cell mdl-cell--8-col">');

            $main = $main.find('div').last();

            $main.append('<h3>jNet Framework!</h3>');
            $main.append('<a class="demo-gh mdl-button mdl-js-button mdl-button--fab mdl-button--colored" href="https://github.com/REZ1DENT3/jNet"><i class="material-icons">link</i></a>');

            $h3 = $main.find('h3');
            $h3.css('color', '#fdd000');
            $h3.css('text-align', 'center');

            $main.append('<p>При написании нативного веб-приложения легко начать ' +
                    'чувствовать себя богом, способным работать просто с библиотекой работы ' +
                    'с DOM (такой как jQuery) и горсткой сервисных плагинов. Вскоре возникает проблема в ' +
                    'виде груды вложенных возвратных функций jQuery и разбросанных DOM-элементов без всякой ' +
                    'структуры вместо приложения.</p>');

            $main.append('<h3>Что такое MVC или, лучше сказать, MV*?</h3>');

            $main.append('<p>Эти современные библиотеки дают разработчикам простой ' +
                    'путь к организации кода, используя вариации паттерна проектирования, ' +
                    'известного как MVC (Model-View-Controller). ' +
                    'MVC разделяет задачи в приложении на 3 части:</p>');

            $ol = $main.append('<ol></ol>');

            $ol.append('<li>Модель (логика) представляют проблемно-ориентированные знания и ' +
                    'данные в приложении. Думайте о них как о типе данных, которые сможете ' +
                    'смоделировать, о таких, как Пользователь, Фото, или Замечание. ' +
                    'Модели должны информировать о чём-либо при наблюдении за их текущим состоянием. </li>');

            $ol.append('<li>Представление (вид) обычно проектируется в виде пользовательского интерфейса, ' +
                    'такого как разметка и шаблоны, но не интерактивного. Они должны знать о существовании Моделей, ' +
                    'но непосредственно не общаться с ними.</li>');

            $ol.append('<li> Контроллеры (диспетчеры) обрабатывают входные данные (клики, пользовательские действия) в ' +
                    'приложении, а Представления можно рассматривать как выходной продукт обработки. ' +
                    'Когда Контроллер меняет состояние Модели (например, редактирование заголовка на фото), ' +
                    'он прямо не меняет Представление. Это — случай, где работают отношения Модели и Представления.</li>');

            $p = $main.find('p');
            $p.css('font-size', '20px');
            $p.css('color', 'gray');

            $li = $main.find('li');
            $li.css('font-size', '18px');

            $main.append('<h3>Ajax Testing</h3>');
            $main.append('<div id="ajax-test"></div>');

            jNet.ajax({
                url: 'https://hm.babichev.net/api/v1.1/currencies',
                data: {
                    q: 'rub=x'
                },
                success: function (http) {
                    json = JSON.parse(http.target.response);
                    $('#ajax-test').innerHTML('<p>[' + jNet.now() + '] RUB=X: ' + json.data.query.results.row.col1 + '</p>');
                }
            });

            $form = $main.append('<form></form>').find('form');
            $form.append('<div class="mdl-grid"></div>');

            $div = $form.find('div');
            $div = $div.append('<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"></div>').find('div');

            $div.append('<input class="mdl-textfield__input" id="test-input"/>');
            $div.append('<label class="mdl-textfield__label" for="test-input">Text...</label>');

            $div = $form.append('<div class="mdl-grid"></div>').find('div').last();
            $div = $div.append('<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"></div>').find('div');

            $div.append('<input type="file" name="files[]" multiple />');

            $div = $form.append('<div class="mdl-grid"></div>').find('div').last();
            $div = $div.append('<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"></div>').find('div');

            $div.append('<select size="3" multiple name="hero[]">' +
                '<option disabled>Выберите героя</option>' +
                '<option value="Чебурашка">Чебурашка</option>' +
                '<option selected value="Крокодил Гена">Крокодил Гена</option>' +
                '<option value="Шапокляк">Шапокляк</option>' +
                '<option value="Крыса Лариса">Крыса Лариса</option>' +
            '</select>');

            $div = $form.append('<div class="mdl-grid"></div>').find('div').last();
            $div = $div.append('<div class="mdl-cell mdl-cell--4-col mdl-cell--4-col-phone"></div>').find('div');

            $div.append('<button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">submit</button>');

            $body.find('li').at(1).css('color', 'red');

            $form.submit(function (event) {

                $(event.target).get({
                    url: "http://forms/test.php",
                    success: function (http) {
                        console.log(['GET', JSON.parse(http.target.response)]);
                    }
                });

                $(event.target).post({
                    url: "http://forms/test.php",
                    success: function (http) {
                        console.log(['POST', JSON.parse(http.target.response)]);
                    }
                });

                return false;
            });

            $main.append('<h3>Events</h3>');
            $main.append('<ol id="events"></ol>');
            $olEvents = $('#events');
            'contextmenu dblclick mouseup mousedown mouseout mouseover mousemove'.split(' ').forEach(function (element) {
                $olEvents.append('<li><a href="#" id="test-' + element + '">' + element + '</a></li>');
                $element = $('#test-' + element);
                $element[element](function (event) {
                    console.log([element, event]);
                });
            });

            $olEvents.find('li').odd(function ($e) {
                $e.css('background', '#ccc');
            });

            $main.append('<h3>Keyboard</h3>');
            $main.append('<form id="event-keyboard"></form>');
            $kbEvents = $('#event-keyboard');
            'keypress keydown keyup'.split(' ').forEach(function (element) {
                $kbEvents.append('<div class="mdl-grid"></div>');
                $div = $kbEvents.find('div').last();
                $div = $div.append('<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"></div>')
                        .find('div')
                        .last();

                $div.append('<input class="mdl-textfield__input" id="' + element + '-kbEvent-input"/>');
                $div.append('<label class="mdl-textfield__label" for="' + element + '-kbEvent-input">' + element + '...</label>');
                $("#" + element + "-kbEvent-input")[element](function (event) {
                    console.log([element, event]);
                });
            });

            $main.append('<p id="test-selectstart">«Hello, world!» — программа, результатом работы которой является ' +
                    'вывод на экран или иное устройство фразы «Hello, world!» (в дословном переводе с английского ' +
                    '— «Привет, мир!»; представляет собой распространённое неформальное приветствие, близкое к ' +
                    'русскому «всем привет!»). Также используются вариации с другой пунктуацией или регистром — ' +
                    'например, «Hello World». Обычно это первый пример программы в учебниках по программированию, и ' +
                    'для многих студентов такая программа является первым опытом при изучении нового языка.</p>');

            $('#test-selectstart').selectstart(function (event) {
                console.log(event);
            }).copy(function (event) {
                console.log(event);
            }).mousedown(function (event) {

                if (event.button == 1) { // Middle Button
                    $element = $(event.target);
                    console.log({event: event, getSelection: $element.getSelection()});
                    $element.cleanSelection();
                    return false;
                }

            });

            $('input.mdl-textfield__input').each(function (element) {
                $element = $(element);
                $element.attr('name', $element.attr('id'));
                $element.attr('type', 'text');
            });

        });

    </script>
</head>
<body>
</body>
</html>