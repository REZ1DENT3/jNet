/*! jNet 0.1.5 [Babichev Maxim (REZ1DENT3), <info@babichev.net>] 28-04-2016 */
function jNetRegister(a,b,c,d){"use strict";var e={};e[c]=d,"function"==typeof define&&define.amd?define(function(){return e}):b[c]=a[c]=e[c]}jNetRegister(window,document,"jNet",function(a,b){function c(b){this._document=a,this._selector=b,this.getDocuments()}var d=function(b){return/^f/.test(typeof b)?/c/.test(a.readyState)?b():d(a).ready(b):new c(b)};return d[b]=c[b]=d.fn=c.fn={_selector:"",_document:"",_find:!1,getDocuments:function(){if(this._find)return this;for(;this.length;)delete this[this.length-1];var a=[];return"undefined"!=typeof this._selector&&("string"==typeof this._selector.toString&&this._selector.toString==this.toString?a=this._selector:this._selector&&this._selector.nodeType?(a=[this._selector],"undefined"!=typeof this._selector.parentNode&&(this._document=this._selector.parentNode)):Array.isArray(this._selector)?a=this._selector:"string"==typeof this._selector&&(this._selector=this._selector.selectorReplaceId(),a=this._document.querySelectorAll(this._selector))),Array.prototype.push.apply(this,a),this._find=this.length>0,this},domManip:function(){var a=arguments[0],b=[];if(this.each(function(c,d){a.document=d,a.docInd=c;var e=a.callback.apply(this,[a]);if("undefined"!=typeof e&&null!==e)if("undefined"!=typeof e.length)if(Array.isArray(e))Array.prototype.push.apply(b,e);else if("string"==typeof e)b.push(e);else for(var f=0;f<e.length;++f)b.push(e[f]);else b.push(e)}),"undefined"==typeof a.value&&"undefined"!=typeof a.jNetToType)switch(a.jNetToType){case"string":return 1==b.length?b[0]:b.join("\n");case"array":return 1==b.length?b[0]:b}return d(b)},eq:function(a){return d(this[a])},at:function(a){return this.eq(a)},first:function(){return this.eq(0)},last:function(){return this.eq(this.length-1)},odd:function(){return this.domManip.call(this,{callback:function(a){return 1===(1&a.docInd)?a.document:void 0}})},even:function(){return this.domManip.call(this,{callback:function(a){return 0===(1&a.docInd)?a.document:void 0}})},serialize:function(a){return this.domManip.call(this,{callback:function(a){function b(a,b){return a+"="+encodeURIComponent(b).replace(/%20/g,"+")}var c=[],d=a.document,e=a.method||"GET";if("GET"===e||"DELETE"===e){if("object"==typeof d&&"FORM"==d.nodeName)for(var f=0;f<d.elements.length;++f){var g=d.elements[f];if(-1===["reset","submit","button","file"].indexOf(g.type)&&g.name)if("select-multiple"==g.type)for(var h=0;h<d.elements[f].options.length;++h)g.options[h].selected&&c.push(b(g.name,g.options[h].value));else("checkbox"!=g.type&&"radio"!=g.type||g.checked)&&c.push(this.toQuery(g.name,g.value))}return c.join("&")}return new FormData(d)},method:a,jNetToType:"array"})},files:function(){return this.domManip.call(this,{callback:function(a){return a.document.files},jNetToType:"array"})},parent:function(){return this.domManip.call(this,{callback:function(a){return"undefined"!=typeof a.document.parentNode?(a.document=a.document.parentNode,a.document):void 0}})},find:function(a){return"undefined"==typeof a&&(a="*"),this.domManip.call(this,{callback:function(b){return b.document.querySelectorAll(a)},selector:a})},classList:function(){return this.domManip.call(this,{callback:function(a){return a.document.classList},jNetToType:"array"})},hasClass:function(a){return this.domManip.call(this,{callback:function(a){return a.document.classList.contains(a.className)},className:a,jNetToType:"array"})},addClass:function(a){return this.domManip.call(this,{callback:function(a){return a.document.classList.add(a.className)},className:a})},removeClass:function(a){return this.domManip.call(this,{callback:function(a){return a.document.classList.remove(a.className)},className:a})},toggleClass:function(a){return this.domManip.call(this,{callback:function(a){return a.document.classList.toggle(a.className)},className:a})},css:function(a,b){return this.domManip.call(this,{callback:function(a){return"undefined"==typeof a.value?a.document.style.getPropertyValue(a.name):(a.document.style.setProperty(a.name,a.value),a.document)},name:a,value:b,jNetToType:"array"})},text:function(a){return this.domManip.call(this,{callback:function(a){if("undefined"!=typeof a.value){try{a.document.innerText=a.value}catch(b){a.document.value=a.value}return this}return a.document.innerText||a.document.value},value:a,jNetToType:"string"})},append:function(a){return this.domManip.call(this,{callback:this._prependAppend,_html:a,type:"append"})},prepend:function(a){return this.domManip.call(this,{callback:this._prependAppend,_html:a,type:"prepend"})},_prependAppend:function(a){var b=a._html;return"string"==typeof b?b=[b.parseHTML()]:"object"==typeof b&&"jNet"!==b.toString&&(b=[b]),d.each(b,function(b,c){var d=c;"undefined"!=typeof c.body&&"undefined"!=typeof c.body.firstChild?d=c.body.firstChild:"undefined"!=typeof c.body&&(d=c.body),"prepend"==a.type?a.document.insertBefore(d,a.document.firstChild):"append"==a.type&&a.document.appendChild(d)}),d(a.document)},innerHTML:function(a){return this.domManip.call(this,{callback:function(a){return"undefined"!=typeof a.value?(a.document.innerHTML=a.value,this):a.document.innerHTML},value:a,jNetToType:"string"})},outerHTML:function(a){return this.domManip.call(this,{callback:function(a){return"undefined"!=typeof a.value?(a.document.outerHTML=a.value,this):a.document.outerHTML},value:a,jNetToType:"string"})},data:function(a,b){return"undefined"==typeof a?this.domManip.call(this,{callback:function(a){return a.document.dataset},jNetToType:"array"}):"undefined"==typeof b?this.domManip.call(this,{callback:function(a){return a.document.dataset[a.nameAttribute]},nameAttribute:a,jNetToType:"array"}):this.domManip.call(this,{callback:function(a){return a.document.dataset[a.nameAttribute]=a.valueAttribute,this},nameAttribute:a,valueAttribute:b})},attr:function(a,b){return"undefined"==typeof b?this.domManip.call(this,{callback:function(a){return a.document.getAttribute(a.nameAttribute)},nameAttribute:a,jNetToType:"string"}):null===b||""===b?this.domManip.call(this,{callback:function(a){return this.hasAttribute(a.nameAttribute)&&a.document.removeAttribute(a.nameAttribute),this},nameAttribute:a}):this.domManip.call(this,{callback:function(a){return a.document.setAttribute(a.nameAttribute,a.valueAttribute),this},nameAttribute:a,valueAttribute:b})},width:function(){return this.domManip.call(this,{callback:function(a){return a.document.clientWidth},jNetToType:"array"})},height:function(){return this.domManip.call(this,{callback:function(a){return a.document.clientHeight},jNetToType:"array"})},get:function(a){return this.domManip.call(this,{callback:function(a){return a.options.method="GET",a.options.data=d(this),d.ajax(a.options)},options:a,jNetToType:"array"})},post:function(a){return this.domManip.call(this,{callback:function(a){return a.options.method="POST",a.options.data=d(this),d.ajax(a.options)},options:a,jNetToType:"array"})},remove:function(){return this.domManip.call(this,{callback:function(a){return"undefined"==typeof a.document.parentNode?this.outerHTML(""):a.document.parentNode.removeChild(a.document),this}})},cleanSelection:function(){var a=this.getSelection();return"function"==typeof a.empty?a.empty():"function"==typeof a.removeAllRanges&&a.removeAllRanges(),this},getSelection:function(){return"function"==typeof window.getSelection?window.getSelection():"function"==typeof a.getSelection?a.getSelection():"undefined"!=typeof a.selection?a.selection:void 0},insertAfter:function(a){return a=d(a),this.domManip.call(this,{callback:function(a){a.element[0].parentNode.insertBefore(a.document,a.element[0].nextSibling)},element:a.first()})},insertBefore:function(a){return a=d(a),this.domManip.call(this,{callback:function(a){a.element[0].parentNode.insertBefore(a.document,a.element[0])},element:a.first()})},each:function(a,b){var c=Array.isArray(a)||"string"==typeof a.toString&&"jNet"==a.toString;if("undefined"==typeof b&&(b=a,a=this.getDocuments(),c=!0),c)for(var d=a.length,e=0;d>e;++e)b.call(a[e],e,a[e]);else Object.keys(a).forEach(function(a,c){b.call(c,a,c)})},submit:function(a){return this.domManip.call(this,{callback:function(a){return a.document.onsubmit=a.listener,this},listener:a})},on:function(a,b,c){return this.each(function(d,e){e.addEventListener(a,b,c)}),this},off:function(a,b,c){return this.each(function(d,e){e.removeEventListener(a,b,c)}),this},ready:function(a,b){return this.on("DOMContentLoaded",a,b)},_easing:function(){return this.linear=function(a){return a},this.quadratic=function(a){return Math.pow(a,2)},this.swing=function(a){return.5-Math.cos(a*Math.PI)/2},this.circ=function(a){return 1-Math.sin(Math.acos(a))},this.back=function(a,b){return Math.pow(a,2)*((b+1)*a-b)},this.bounce=function(a){for(var b=0,c=1;1;b+=c,c/=2)if(a>=(7-4*b)/11)return-Math.pow((11-6*b-11*a)/4,2)+Math.pow(c,2)},this.elastic=function(a,b){return Math.pow(2,10*(a-1))*Math.cos(20*Math.PI*b/3*a)},this},animate:function(a){var b=new Date,c=setInterval(function(){var d=new Date-b,e=d/a.duration;e>1&&(e=1),a.progress=e;var f=a.delta(e);a.step(f),1==e&&(clearInterval(c),a.complete(a.jNetDoc))},a.delay||10);return c},show:function(a){return this.fadeIn({duration:a,after:function(a,b){a.css("display","")}})},hide:function(a){return this.fadeOut({duration:a,complete:function(a){a.css("display","none")}})},fadeIn:function(a){var b=this;return this.domManip.call(this,{callback:b._fadeUniversal,options:a,to:0})},fadeOut:function(a){var b=this;return this.domManip.call(this,{callback:b._fadeUniversal,options:a,to:1})},_fadeUniversal:function(a){var b=d(this);return"object"!=typeof a.options&&(a.options={}),"number"!=typeof a.options.duration&&(a.options.duration=400),"function"!=typeof a.options.complete&&(a.options.complete=function(){}),"function"!=typeof a.options.after&&(a.options.after=function(a,b){}),"string"!=typeof a.options.easing&&(a.options.easing="swing"),a.options.after(b,a),b.animate({jNetDoc:b,duration:a.options.duration,delta:function(c){return c=this.progress,b._easing()[a.options.easing](c,0)},complete:a.options.complete,step:function(c){var d=a.to+c;a.to&&(d=a.to-c),b.css("opacity",d)}}),this},toString:"jNet"},d}(document,"prototype")),jNet.ajax=function(a){function b(a){return Object.keys(a).map(function(b){return b+"="+encodeURIComponent(a[b]).replace(/%20/g,"+")}).join("&")}var c=new XMLHttpRequest;if(a.method=a.method||"GET",a.method=a.method.toUpperCase(),a.data=a.data||{},a.files=a.files||{},a.user=a.user||null,a.password=a.password||null,"undefined"==typeof a.async&&(a.async=!0),"function"!=typeof a.success&&(a.success=function(a){}),"function"!=typeof a.stateChange&&(a.stateChange=function(a){}),"function"!=typeof a.progress&&(a.progress=function(a){}),"function"!=typeof a.fail&&(a.fail=function(a){}),c.onerror=a.fail,c.onload=a.success,c.onprogress=a.progress,c.onreadystatechange=a.stateChange,"object"==typeof a.data)if("jNet"===a.data.toString)a.data=a.data.serialize(a.method);else switch(a.method){case"GET":case"DELETE":a.data=b(a.data);break;case"PUT":case"HEAD":case"POST":case"OPTIONS":var d=new FormData;for(var e in a.files)a.files.hasOwnProperty(e)&&d.append(e,a.files[e]);for(var f in a.data)a.data.hasOwnProperty(f)&&d.append(f,a.data[f]);a.data=d}return"string"==typeof a.data&&(-1===a.url.indexOf("?")?a.url+="?"+a.data:a.url+="&"+a.data,a.data=null),c.open(a.method,a.url,a.async,a.user,a.password),c.send(a.data),c},Array.prototype.first=function(){return this.at(0)},Array.prototype.last=function(){return this.at(this.length-1)},Array.prototype.at=function(a){return this[a]},Array.prototype.clone=function(){return this.slice()},Array.prototype.swap=function(a,b){var c=this[a];return this[a]=this[b],this[b]=c,this},Array.prototype.unique=function(){var a={};return this.forEach(function(b){a[b]=1}),Object.keys(a)},Array.prototype.shuffle=function(){for(var a=this.clone(),b=this.length;b;){var c=Math.random()*b--|0;a=a.swap(c,b)}return a},Array.prototype.diff=function(a){return this.filter(function(b){return-1===a.indexOf(b)})},Array.prototype.remove=function(a){return this.splice(this.indexOf(a),1),this},Array.prototype.contains=function(a){return-1!==this.indexOf(a)},window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(a){window.clearTimeout(a)},jNet.Canvas=function(a){return this._canvas=jNet(a),this._context=void 0,this._id=void 0,this.getCanvas=function(){return this._canvas[0]},this.getContext=function(){return this._context},this.setContext2D=function(){return this._context=this.getCanvas().getContext("2d"),this},this.setContext3D=function(){return this._context=this.getCanvas().getContext("3d"),this},this.setWidth=function(a){this.getCanvas().width=a},this.setHeight=function(a){this.getCanvas().height=a},this.setSize=function(a,b){this.setWidth(a),this.setHeight(b)},this.start=function(){var a=this;this._id=requestAnimationFrame(function(){return a.start()}),this.draw()},this.stop=function(){this._id&&(cancelAnimationFrame(this._id),this._id=void 0)},this.draw=function(){},this._canvas._find||(this._canvas=jNet(document.createElement("canvas")),jNet(document.body).append(this._canvas),this.setSize(256,256),this.setContext2D()),this},jNet.cookie=function(a){return this.remove=function(a){this.set(a,"",{expires:-1})},this.set=function(b,c,d){if(d=d||{},"number"==typeof d.expires){var e=new Date;e.setMilliseconds(e.getMilliseconds()+864e5*d.expires),d.expires=e}"undefined"==typeof d.path&&(d.path="/");try{var f=JSON.stringify(c);/^[\{\[]/.test(f)&&(c=f)}catch(g){}return c=encodeURIComponent(String(c)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(String(b)),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,encodeURI),(a.cookie=[b,"=",c,d.expires&&"; expires="+d.expires.toUTCString(),d.path&&"; path="+d.path,d.domain&&"; domain="+d.domain,d.secure?"; secure":""].join("")).length>0},this.get=function(b){var c={};if(a.cookie.length){var d=/(%[0-9A-Z]{2})+/g;a.cookie.split("; ").forEach(function(a){var b=a.split("="),e=b[0].replace(d,decodeURIComponent),f=b.slice(1).join("=");f=f.jNTrim('["]+'),f=f.replace(d,decodeURIComponent),c[e]=f})}return"undefined"==typeof b?c:c[b]},this}(document),jNet.each=jNet.fn.each,jNet.now=function(){return Math.floor((new Date).getTime()/1e3)},jNet.each(["click","contextmenu","dblclick","mouseup","mousedown","mouseout","mouseover","mousemove","keyup","keydown","keypress","copy","selectstart","selectionchange","select"],function(a,b){jNet.fn[b]=function(a,c){return this.on(b,a,c)}}),Math.rand=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},String.prototype.parseHTML=function(a){var b=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,c=/<([\w:]+)/,d=/<|&#?\w+;/,e={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};a=a||document;var f,g,h,i,j=a.createDocumentFragment();if(d.test(this)){for(f=j.appendChild(a.createElement("div")),g=(c.exec(this)||["",""])[1].toLowerCase(),h=e[g]||e._default,f.innerHTML=h[1]+this.replace(b,"<$1></$2>")+h[2],i=h[0];i--;)f=f.lastChild;for(j.removeChild(j.firstChild);f.firstChild;)j.appendChild(f.firstChild)}else j.appendChild(a.createTextNode(this));return j},String.prototype.isHTML=function(){var a=document.createElement("div");a.innerHTML=this;for(var b=a.childNodes,c=b.length;c--;)if(1==b[c].nodeType)return!0;return!1},String.prototype.parseXML=function(){var a=new DOMParser;return a.parseFromString(this,"text/xml")},String.prototype.jNTrim=function(a){return"undefined"==typeof a?this.trim():this.replace(new RegExp("/^"+a+"|"+a+"$/gm"),"")},String.prototype.selectorReplaceId=function(){return this.replace(/#([-\w]+)/g,"[id=$1]")};