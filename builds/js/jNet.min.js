/**
 *  @author REZ1DENT3, Babichev Maxim
 *  @site https://babichev.net
 *  @year 2013 - 2016
 *  @version 0.435
 */

var jNet=new(function(){'use strict';String.prototype.jNToDocument=function(){var domParser=new DOMParser();return domParser.parseFromString(this,"text/html")};String.prototype.jNTrim=function(regex){if(typeof regex=='undefined'){return this.trim()}
return this.replace(new RegExp('/^'+regex+'|'+regex+'$/gm'),'')};this.querySelectorAll=function(selector){var _tmp=new jNet.jNArray();var _arr=document.querySelectorAll(selector);for(var i=0;i<_arr.length;++i){_tmp.push(new jNet.jNDocQuery(_arr[i]))}
return _tmp};this.jNArray=function(data){this._array=[];if(typeof data!="undefined"){this._array=data}
this.first=function(){return this.at(0)};this.last=function(){return this.at(this.length()-1)};this.at=function(key){return this._array[key]};this.unique=function(){var ko={};this.forEach(function(item){ko[item]=1});return Object.keys(ko)};this.shuffle=function(){function get(index){return Math.floor(Math.random()*index)}
for(var i=this._array.length,j;i;){j=get(i--);this._array[j]=[this._array[i],this._array[i]=this._array[j]][0]}
return this};this.diff=function(a){return this.filter(function(i){return a.indexOf(i)<0})};this.remove=function(item){this.splice(this.indexOf(item),1)};this.contains=function(item){return(this.indexOf(item)!=-1)};this.length=function(){return this._array.length};this.concat=function(items){return this._array.concat(items)};this.join=function(separator){return this._array.join(separator)};this.pop=function(){return this._array.pop()};this.push=function(items){return this._array.push(items)};this.reverse=function(){return this._array.reverse()};this.shift=function(){return this._array.shift()};this.slice=function(start,end){return this._array.slice(start,end)};this.sort=function(compareFn){return this._array.some(compareFn)};this.splice=function(start,deleteCount,items){return this._array.splice(start,deleteCount,items)};this.unshift=function(items){return this._array.unshift(items)};this.valueOf=function(){return this._array.valueOf()};this.reduce=function(callback,initialValue){return this._array.reduce(callback,initialValue)};this.reduceRight=function(callback,initialValue){return this._array.reduceRight(callback,initialValue)};this.indexOf=function(searchElement,fromIndex){return this._array.indexOf(searchElement,fromIndex)};this.lastIndexOf=function(searchElement,fromIndex){return this._array.lastIndexOf(searchElement,fromIndex)};this.every=function(callback,thisArg){return this._array.every(callback,thisArg)};this.filter=function(callback,thisArg){return this._array.filter(callback,thisArg)};this.forEach=function(callback,thisArg){return this._array.forEach(callback,thisArg)};this.map=function(callback,thisArg){return this._array.map(callback,thisArg)};this.some=function(callback,thisArg){return this._array.some(callback,thisArg)};this.toString=function(){return '[jNArray]'};return this};this.jNDocQuery=function(doc){this._array=new jNet.jNArray();this._d=doc;switch(typeof doc){case 'object':var toStringArr=doc.toString().split(',');if(toStringArr.length){switch(toStringArr[0]){case jNet.jNDocQuery().toString():return doc;case jNet.jNArray().toString():this._array=doc;this._d=null;break}}
break;case 'string':this._d=document.querySelector(doc);break}
this._call=function(){var args=arguments[0];if(this._array.length()){var _arr=new jNet.jNArray(this._array.map(function(element){return element[args.callback].call(element,args)}));if(_arr.length()==1){return _arr.first()}
return _arr}
return this[args.callback].call(this,args)};this.at=function(index){if(this._array.length()){return this._array.at(index)}
return this};this.first=function(){if(this._array.length()){return this._array.first()}
return this};this.last=function(){if(this._array.length()){return this._array.last()}
return this};this.files=function(){return this._call.call(this,{callback:'_files'})};this._files=function(){return this._d.files};this.findAll=function(selector){return new jNet.jNDocQuery(this._call.call(this,{callback:'_findAll',selector:selector}))};this._findAll=function(obj){var _tmp=new jNet.jNArray();var _arr=this._d.querySelectorAll(obj.selector);for(var i=0;i<_arr.length;++i){_tmp.push(new jNet.jNDocQuery(_arr[i]))}
return _tmp};this.find=function(selector){return this._call.call(this,{callback:'_find',selector:selector})};this._find=function(obj){var _tmp=new jNet.jNDocQuery(this._d);_tmp._d=this._d.querySelector(obj.selector);return _tmp};this.toString=function(){return '[jNDocQuery]'};this.classList=function(){return this._call.call(this,{callback:'_classList'})};this._classList=function(){var _classList=this._d.classList;if(typeof _classList=='undefined'){return new jNet.jNArray()}
return new jNet.jNArray(Object.keys(_classList).map(function(key){return _classList[key]}))};this.addClass=function(newClass){return this._call.call(this,{callback:'_addClass',newClass:newClass})};this._addClass=function(obj){this._d.classList.add(obj.newClass);return this};this.removeClass=function(className){return this._call.call(this,{callback:'_removeClass',className:className})};this._removeClass=function(obj){this._d.classList.remove(obj.className);return this};this.hasClass=function(className){return this._call.call(this,{callback:'_hasClass',className:className})};this._hasClass=function(obj){return this.classList().contains(obj.className)};this.toggleClass=function(className){return this._call.call(this,{callback:'_toggleClass',className:className})};this._toggleClass=function(obj){this._d.classList.toggle(obj.className);return this};this.cleanClass=function(){return this._call.call(this,{callback:'_cleanClass'})};this._cleanClass=function(){var self=this;this.classList().forEach(function(element){self.removeClass(element)});return self};this.css=function(name,value){return this._call.call(this,{callback:'_css',name:name,value:value})};this._css=function(obj){if(typeof obj.value=='undefined'){return this._d.style.getPropertyValue(obj.name)}
this._d.style.setProperty(obj.name,obj.value);return this};this.parent=function(){return this._call.call(this,{callback:'_parent'})};this._parent=function(){if(typeof this._d.parentNode!="undefined"){this._d=this._d.parentNode;return this}
return undefined};this.text=function(value){return this._call.call(this,{callback:'_text',value:value})};this._text=function(obj){if(typeof obj.value!="undefined"){try{this._d.innerText=obj.value}
catch(e){this._d.value=obj.value}
return this}
return this._d.innerText||this._d.value};this.innerHTML=function(value){return this._call.call(this,{callback:'_innerHTML',value:value})};this._innerHTML=function(obj){if(typeof obj.value!="undefined"){this._d.innerHTML=obj.value;return this}
return this._d.innerHTML};this.outerHTML=function(value){return this._call.call(this,{callback:'_outerHTML',value:value})};this._outerHTML=function(obj){if(typeof obj.value!="undefined"){this._d.outerHTML=obj.value;return this}
return this._d.outerHTML};this.append=function(html){return this._call.call(this,{callback:'_append',html:html})};this._append=function(obj){var html=obj.html;if(typeof html=='string'){html=html.jNToDocument()}
else{switch(html.toString()){case jNet.jNDocQuery().toString():html=html._outerHTML().jNToDocument();break}}
if(typeof html.outerHTML!='undefined'){html=html.outerHTML.jNToDocument()}
if(typeof html.body.firstChild!='undefined'){this._d.appendChild(html.body.firstChild)}
return this};this.getAttribute=function(nameAttribute){return this._call.call(this,{callback:'_getAttribute',nameAttribute:nameAttribute})};this._getAttribute=function(obj){return this._d.getAttribute(obj.nameAttribute)};this.hasAttribute=function(nameAttribute){return this._call.call(this,{callback:'_hasAttribute',nameAttribute:nameAttribute})};this._hasAttribute=function(obj){return this._d.hasAttribute(obj.nameAttribute)};this.addAttribute=function(nameAttribute,valueAttribute){return this._call.call(this,{callback:'_addAttribute',nameAttribute:nameAttribute,valueAttribute:valueAttribute})};this._addAttribute=function(obj){this._d.setAttribute(obj.nameAttribute,obj.valueAttribute);return this};this.width=function(){return this._call.call(this,{callback:'_width'})};this._width=function(){return this._d.clientWidth};this.height=function(){return this._call.call(this,{callback:'_height'})};this._height=function(){return this._d.clientHeight};this.removeAttribute=function(nameAttribute){return this._call.call(this,{callback:'_removeAttribute',nameAttribute:nameAttribute})};this._removeAttribute=function(obj){if(this._hasAttribute(obj.nameAttribute)){this._d.removeAttribute(obj.nameAttribute)}
return this};this.remove=function(){return this._call.call(this,{callback:'_remove'})};this._remove=function(){if(typeof this._d.parentNode=='undefined'){this.outerHTML("")}
else{this._d.parentNode.removeChild(this._d)}
return this};this.ready=function(listener,useCapture){return this._call.call(this,{callback:'_ready',listener:listener,useCapture:useCapture})};this._ready=function(obj){this._addEventListener("DOMContentLoaded",obj.listener,obj.useCapture);return this};this.cleanSelection=function(){var $selection=this.getSelection();if(typeof $selection.empty=="function"){$selection.empty()}
else if(typeof $selection.removeAllRanges=="function"){$selection.removeAllRanges()}
return this};this.getSelection=function(){if(typeof window.getSelection=="function"){return window.getSelection()}
else if(typeof document.getSelection=="function"){return document.getSelection()}
else if(typeof document.selection!="undefined"){return document.selection}
return undefined};this.select=function(listener,useCapture){return this._call.call(this,{callback:'_select',listener:listener,useCapture:useCapture})};this._select=function(obj){this.addEventListener('select',obj.listener,obj.useCapture);return this};this.selectionchange=function(listener,useCapture){return this._call.call(this,{callback:'_selectionchange',listener:listener,useCapture:useCapture})};this._selectionchange=function(obj){this.addEventListener('selectionchange',obj.listener,obj.useCapture);return this};this.selectstart=function(listener,useCapture){return this._call.call(this,{callback:'_selectstart',listener:listener,useCapture:useCapture})};this._selectstart=function(obj){this.addEventListener('selectstart',obj.listener,obj.useCapture);return this};this.copy=function(listener,useCapture){return this._call.call(this,{callback:'_copy',listener:listener,useCapture:useCapture})};this._copy=function(obj){this.addEventListener('copy',obj.listener,obj.useCapture);return this};this.keypress=function(listener,useCapture){return this._call.call(this,{callback:'_keypress',listener:listener,useCapture:useCapture})};this._keypress=function(obj){this.addEventListener('keypress',obj.listener,obj.useCapture);return this};this.keydown=function(listener,useCapture){return this._call.call(this,{callback:'_keydown',listener:listener,useCapture:useCapture})};this._keydown=function(obj){this.addEventListener('keydown',obj.listener,obj.useCapture);return this};this.keyup=function(listener,useCapture){return this._call.call(this,{callback:'_keyup',listener:listener,useCapture:useCapture})};this._keyup=function(obj){this.addEventListener('keyup',obj.listener,obj.useCapture);return this};this.mousemove=function(listener,useCapture){return this._call.call(this,{callback:'_mousemove',listener:listener,useCapture:useCapture})};this._mousemove=function(obj){this.addEventListener('mousemove',obj.listener,obj.useCapture);return this};this.mouseover=function(listener,useCapture){return this._call.call(this,{callback:'_mouseover',listener:listener,useCapture:useCapture})};this._mouseover=function(obj){this.addEventListener('mouseover',obj.listener,obj.useCapture);return this};this.mouseout=function(listener,useCapture){return this._call.call(this,{callback:'_mouseout',listener:listener,useCapture:useCapture})};this._mouseout=function(obj){this.addEventListener('mouseout',obj.listener,obj.useCapture);return this};this.mousedown=function(listener,useCapture){return this._call.call(this,{callback:'_mousedown',listener:listener,useCapture:useCapture})};this._mousedown=function(obj){this.addEventListener('mousedown',obj.listener,obj.useCapture);return this};this.mouseup=function(listener,useCapture){return this._call.call(this,{callback:'_mouseup',listener:listener,useCapture:useCapture})};this._mouseup=function(obj){this.addEventListener('mouseup',obj.listener,obj.useCapture);return this};this.dblclick=function(listener,useCapture){return this._call.call(this,{callback:'_dblclick',listener:listener,useCapture:useCapture})};this._dblclick=function(obj){this.addEventListener('dblclick',obj.listener,obj.useCapture);return this};this.contextmenu=function(listener,useCapture){return this._call.call(this,{callback:'_contextmenu',listener:listener,useCapture:useCapture})};this._contextmenu=function(obj){this.addEventListener('contextmenu',obj.listener,obj.useCapture);return this};this.click=function(listener,useCapture){return this._call.call(this,{callback:'_click',listener:listener,useCapture:useCapture})};this._click=function(obj){this.addEventListener('click',obj.listener,obj.useCapture);return this};this.submit=function(listener){return this._call.call(this,{callback:'_submit',listener:listener})};this._submit=function(obj){this._d.onsubmit=obj.listener;return this};this.on=function(type,listener,useCapture){return this.addEventListener(type,listener,useCapture)};this.addEventListener=function(type,listener,useCapture){return this._call.call(this,{callback:'_addEventListener',type:type,listener:listener,useCapture:useCapture})};this._addEventListener=function(obj){this._d.addEventListener(obj.type,obj.listener,obj.useCapture);return this};this.off=function(type,listener,useCapture){return this.removeEventListener(type,listener,useCapture)};this.removeEventListener=function(type,listener,useCapture){return this._call.call(this,{callback:'_removeEventListener',type:type,listener:listener,useCapture:useCapture})};this._removeEventListener=function(obj){this._d.removeEventListener(obj.type,obj.listener,obj.useCapture);return this};return this};this.serialize=function(objData){return Object.keys(objData).map(function(key){return encodeURIComponent(key)+'='+encodeURIComponent(objData[key])}).join('&')};this.jNCookie=function(){this._cookies=new jNet.jNArray();this.remove=function(key){this.set(key,'',{expires:-1});return typeof this.get(key)=="undefined"};this.set=function(key,value,attributes){if(typeof attributes=="undefined"){attributes={}}
if(typeof attributes.expires==='number'){var expires=new Date();expires.setMilliseconds(expires.getMilliseconds()+attributes.expires*864e+5);attributes.expires=expires}
if(typeof attributes.path=="undefined"){attributes.path='/'}
try{var result=JSON.stringify(value);if(/^[\{\[]/.test(result)){value=result}}
catch(e){}
value=encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);key=encodeURIComponent(String(key));key=key.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);key=key.replace(/[\(\)]/g,encodeURI);return(document.cookie=[key,'=',value,attributes.expires&&'; expires='+attributes.expires.toUTCString(),attributes.path&&'; path='+attributes.path,attributes.domain&&'; domain='+attributes.domain,attributes.secure?'; secure':''].join('')).length>0};this.get=function(key){if(document.cookie.length){this._cookies._array=document.cookie.split('; ');var rDecode=/(%[0-9A-Z]{2})+/g;var obj={};this._cookies.forEach(function(line){var parts=line.split('=');var name=parts[0].replace(rDecode,decodeURIComponent);var cookie=parts.slice(1).join('=');cookie=cookie.jNTrim('["]+');cookie=cookie.replace(rDecode,decodeURIComponent);obj[name]=cookie});if(typeof key=="undefined"){return obj}
return obj[key]}
return{}};return this};this.now=function(){return Math.floor((new Date()).getTime()/1000)};this.clone=function(obj){return JSON.parse(JSON.stringify(obj))};this.ready=function(listener,useCapture){document.addEventListener("DOMContentLoaded",listener,useCapture);return this};this.ajax=function(options){var http=new XMLHttpRequest();options.data=options.data||{};options.files=options.files||{};options.method=options.method||"GET";options.user=options.user||null;options.password=options.password||null;options.contentType=options.contentType||'application/x-www-form-urlencoded';if(typeof options.async=="undefined"){options.async=!0}
if(typeof options.success!="function"){options.success=function(response){}}
if(typeof options.stateChange!="function"){options.stateChange=function(response){}}
if(typeof options.progress!="function"){options.progress=function(response){}}
if(typeof options.fail!="function"){options.fail=function(response){}}
http.onreadystatechange=options.stateChange;http.onload=options.success;http.onerror=options.fail;http.onprogress=options.progress;var query=this.serialize(options.data);if(query&&(options.method==='GET'||options.method==='DELETE')){if(options.url.indexOf('?')===-1){options.url+='?'+query}
else{options.url+='&'+query}
query=null}
http.open(options.method,options.url,options.async,options.user,options.password);if(options.method==='POST'&&Object.keys(options.files).length){var formData=new FormData();for(var keyFile in options.files){if(options.files.hasOwnProperty(keyFile)){formData.append('files[]',options.files[keyFile])}}
for(var keyData in options.data){if(options.data.hasOwnProperty(keyData)){formData.append(keyData,options.data[keyData])}}
query=formData}
else{http.setRequestHeader('Content-Type',options.contentType)}
http.send(query);return http};return this})()